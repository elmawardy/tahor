version: '3'
services:
  redis:
    image: "redis:6.0.6"
  postgres:
    build:
      context: .
      dockerfile: postgresql.dockerfile
  web-backend:
    depends_on: 
      - postgres
      - redis
    build: 
      context: .
      dockerfile: backend.dockerfile
    
    volumes:
      # Update this to wherever you want VS Code to mount the folder of your project
      - ..:/workspace:cached

      # Forwards the local Docker socket to the container.
      - /var/run/docker.sock:/var/run/docker-host.sock 
  
    ports:
      - "8000:8000"